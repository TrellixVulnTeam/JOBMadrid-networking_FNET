"use strict";console.log(">> Ready :)");const filterChips=document.querySelector(".js_filter_chips"),chipsCompanies=document.querySelector(".js_chips_companies"),filterBtn=document.querySelector(".js_filter_btn"),cardsCompanies=document.querySelector(".js_cards_companies");let dataCompanies=[],chipsFilter=[];function renderCards(e){cardsCompanies.innerHTML="";for(const t of e){let e=t.id,n=t.name,d=t.founded,s=t.industry,i=t.size,a=t.website;const c=document.createElement("article"),r=document.createElement("div"),l=document.createElement("h2"),o=document.createElement("p"),p=document.createElement("div"),u=document.createElement("dl"),m=document.createElement("dl"),h=document.createElement("div"),C=document.createElement("a");c.classList.add("card"),c.id=""+e,r.classList.add("card__title"),l.classList.add("card__name"),o.classList.add("card__year"),p.classList.add("card__tags"),u.classList.add("card__tags--industry"),m.classList.add("card__tags--size"),u.classList.add("tag"),m.classList.add("tag"),h.classList.add("card__container-link"),C.classList.add("card__link"),C.target="_blank";const _=document.createTextNode(""+n),f=document.createTextNode(""+d),L=document.createTextNode(""+s),g=document.createTextNode(""+i),y=document.createTextNode("Website");C.href="http://"+a,l.appendChild(_),o.appendChild(f),u.appendChild(L),m.appendChild(g),C.appendChild(y),c.appendChild(r),r.appendChild(l),r.appendChild(o),c.appendChild(p),p.appendChild(u),p.appendChild(m),c.appendChild(h),h.appendChild(C),cardsCompanies.appendChild(c)}}function industries(){const e=dataCompanies.map(e=>e.industry);return e.filter((t,n)=>e.indexOf(t)===n)}function renderChips(){const e=industries();for(const t of e){const e=document.createElement("button");e.classList.add("header__chips--unit"),e.classList.add("js_chips_companies"),e.id=""+t;const n=document.createTextNode(""+t);e.appendChild(n),filterChips.appendChild(e),listenChips()}}function handleChip(e){const t=e.currentTarget.id,n=chipsFilter.findIndex(e=>e===t);-1===n?chipsFilter.push(t):chipsFilter.splice(n,1),e.currentTarget.classList.toggle("header__chips--select"),e.currentTarget.classList.toggle("header__chips--unit")}function listenChips(){document.querySelectorAll(".js_chips_companies").forEach(e=>{e.addEventListener("click",handleChip)})}function companiesFilter(){return dataCompanies.filter(e=>{for(const t of chipsFilter)if(e.industry===t)return!0;return!1})}function handleFilterBtn(){let e=companiesFilter();0===Object.entries(e).length&&(e=dataCompanies),renderCards(e)}fetch("https://challenges-asset-files.s3.us-east-2.amazonaws.com/jobMadrid/companies.json").then(e=>e.json()).then(e=>{dataCompanies=e.map(e=>({id:e.id,name:null===e.name?"unknown":e.name,founded:null===e.founded?"unknown":e.founded,industry:null===e.industry?e.id:e.industry,size:null===e.size?"unknown":e.size,website:null===e.website?"unknown":e.website})),renderCards(dataCompanies),renderChips()}).catch(e=>{console.log(e)}),filterBtn.addEventListener("click",handleFilterBtn);